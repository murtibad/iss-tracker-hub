/* =======================================================================
   PHASE 0: MOBILE-FIRST LAYOUT FOUNDATION
   ======================================================================= 
   
   SAFE ADDITIVE FEATURE - Does not modify existing desktop behavior
   
   Strategy:
   - Add mobile-first base styles
   - Desktop enhancements applied via min-width media queries
   - Existing layout.css remains functional
   - Feature flag: window.FEATURE_MOBILE_LAYOUT = true
   
   ======================================================================= */

/* -----------------------------------------------------------------------
   BASE: Mobile-First Full-Screen Layout
   ----------------------------------------------------------------------- */

/* Full-screen container for 3D/2D views */
.hub-fullscreen-base {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    z-index: 0;
}

/* Main overlay content (sits above full-screen base) */
.hub-overlay-v2 {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 1;
}

/* Make interactive elements clickable */
.hub-overlay-v2>* {
    pointer-events: auto;
}

/* -----------------------------------------------------------------------
   SAFE-AREA INSETS (iPhone Notch / Gesture Bar Support)
   ----------------------------------------------------------------------- */

/* Reserve space for bottom control bar with safe-area support */
.hub-content-safe-area {
    padding-bottom: calc(80px + env(safe-area-inset-bottom));
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
}

/* Top bar safe-area (for notched devices in landscape) */
.hub-topbar-v2 {
    padding-top: env(safe-area-inset-top);
    max-height: 56px;
    height: 56px;
    /* Existing hub-topbar styles will be preserved */
}

/* -----------------------------------------------------------------------
   MOBILE: Bottom Control Bar Space Reservation
   ----------------------------------------------------------------------- */

@media (max-width: 640px) {

    /* Ensure content doesn't overlap with bottom control bar */
    body.mobile-ux-enabled .hub-overlay {
        padding-bottom: calc(80px + env(safe-area-inset-bottom));
    }

    /* Floating HUD should sit above bottom bar */
    body.mobile-ux-enabled .floating-hud {
        bottom: calc(90px + env(safe-area-inset-bottom)) !important;
    }

    /* Pass section should also respect bottom bar */
    body.mobile-ux-enabled #pass-section,
    body.mobile-ux-enabled .pass-section {
        bottom: calc(90px + env(safe-area-inset-bottom)) !important;
    }
}

/* -----------------------------------------------------------------------
   DESKTOP: Keep Existing Layout (min-width: 641px)
   ----------------------------------------------------------------------- */

@media (min-width: 641px) {
    /* Desktop keeps all existing styles */
    /* No changes to existing behavior */
    /* Safe-area insets still respected for edge cases */
}

/* -----------------------------------------------------------------------
   FEATURE FLAG ACTIVATION
   ----------------------------------------------------------------------- 
   
   Add this class to <body> to enable mobile-first layout:
   document.body.classList.add('mobile-ux-enabled');
   
   Check flag with:
   if (window.FEATURE_MOBILE_LAYOUT) { ... }
   
   -----------------------------------------------------------------------*/